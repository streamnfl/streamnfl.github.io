<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>Live Game — Free Trial</title>
<meta name="description" content="Tap to watch a 15s live trial, then continue on ZUZZ.TV with a free trial. No cable. HD on your phone." />
<meta name="theme-color" content="#0b1221" />
<style>
  :root{
    --bg:#0b1221; --panel:#101a34; --ink:#eaf2ff; --muted:#9fb0d3;
    --brand:#24d8ff; --brand2:#7cffc1; --accent:#ff4d4d; --ok:#2dd36f;
    --r:16px; --pad:16px; --maxw:780px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:linear-gradient(180deg,#0b1221,#0a1022 50%,#0b1221);
    font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial;
    color:var(--ink);
  }
  .wrap{max-width:var(--maxw);margin:0 auto;padding:12px 12px 100px}
  header{display:flex;justify-content:center;align-items:center;padding:12px 0}
  .logo{font-weight:800;letter-spacing:.3px;background:linear-gradient(90deg,var(--brand),var(--brand2));
    -webkit-background-clip:text;background-clip:text;color:transparent}
  h1{margin:8px 0 10px;font-size:20px;line-height:1.25;text-align:center}
  .chipbar{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin:10px 0 14px}
  .chip{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;background:rgba(255,255,255,.06);color:var(--muted);font-size:12px}
  .live{color:#fff;background:linear-gradient(90deg,#ff3b3b,#ff6a6a)}
  .dot{width:8px;height:8px;border-radius:50%;background:#fff;box-shadow:0 0 0 3px rgba(255,255,255,.25)}
  .viewer{background:rgba(36,216,255,.18);color:#ccefff}
  .top-cta{display:flex;justify-content:center;margin:10px 0}
  .btn{appearance:none;border:0;border-radius:999px;padding:14px 18px;font-weight:700;font-size:16px;cursor:pointer}
  .btn-primary{background:linear-gradient(90deg,var(--brand),var(--brand2));color:#042036;box-shadow:0 8px 24px rgba(36,216,255,.35)}
  .btn-ghost{background:rgba(255,255,255,.12);color:#fff}

  .card{background:linear-gradient(180deg,#0f1a3a,#0b1430);border:1px solid rgba(255,255,255,.06);border-radius:20px;overflow:hidden;box-shadow:0 10px 30px rgba(0,0,0,.35)}
  .video-wrap{position:relative;background:#000;aspect-ratio:16/9}
  video{width:100%;height:100%;display:block;object-fit:cover;background:#000}
  .overlay-top{position:absolute;top:8px;left:8px;display:flex;gap:8px;align-items:center;z-index:2}
  .overlay-top .pill{display:inline-flex;align-items:center;gap:6px;padding:4px 10px;border-radius:999px;background:rgba(0,0,0,.55);backdrop-filter:blur(6px);color:#fff;font-size:12px}
  .pill.live .red{width:8px;height:8px;border-radius:50%;background:#ff4545;box-shadow:0 0 8px #ff4545}
  .countdown{position:absolute;right:8px;top:8px;background:rgba(0,0,0,.55);color:#fff;padding:6px 10px;border-radius:999px;font-weight:700;font-size:12px;backdrop-filter:blur(6px);z-index:2}
  .progress{position:absolute;left:0;right:0;top:0;height:4px;background:rgba(255,255,255,.15)}
  .bar{height:100%;width:0%;background:linear-gradient(90deg,var(--brand),var(--brand2));transition:width .25s linear}
  .controls{position:absolute;left:8px;bottom:8px;display:flex;gap:8px;z-index:2}

  /* Tap-to-play cover (kept inside video) */
  .gatecover{position:absolute;inset:0;display:grid;place-items:center;background:linear-gradient(180deg,rgba(3,8,24,.2),rgba(3,8,24,.55));z-index:1}
  .playcta{display:flex;flex-direction:column;align-items:center;gap:10px}
  .playcta .small{font-size:12px;color:#cfe6ff}

  /* Sticky CTA */
  .sticky{position:fixed;left:0;right:0;bottom:0;background:linear-gradient(180deg,rgba(11,18,33,.2),#0b1221);border-top:1px solid rgba(255,255,255,.08);padding:10px;display:flex;gap:10px;align-items:center;justify-content:center;z-index:12}
  .sticky .btn{width:100%;max-width:var(--maxw)}

  /* Global loader */
  .loader{position:fixed;inset:0;display:grid;place-items:center;background:#0b1221;z-index:999}
  .spinner{width:68px;height:68px;border-radius:50%;border:6px solid rgba(255,255,255,.12);border-top-color:var(--brand);animation:spin 1s linear infinite}
  @keyframes spin{to{transform:rotate(360deg)}}

  .note{font-size:12px;color:var(--muted);text-align:center;margin-top:8px}
  @media(min-width:780px){ h1{font-size:22px} }

  /* === FULL-SCREEN MODAL (OUTSIDE THE VIDEO) === */
  .modal-backdrop{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(3,8,24,.76);backdrop-filter:blur(8px);z-index:9999}
  .modal-backdrop.show{display:flex}
  .modal-window{width:min(94%,520px);background:linear-gradient(180deg,#0e1a3e,#0a1533);border:1px solid rgba(255,255,255,.08);border-radius:18px;padding:18px;box-shadow:0 25px 60px rgba(0,0,0,.5);transform:translateY(8px) scale(.98);opacity:0;animation:popup .25s ease forwards}
  @keyframes popup{to{transform:translateY(0) scale(1);opacity:1}}
  .modal-window h3{margin:0 0 6px;font-size:20px}
  .modal-window p{margin:0 0 14px;color:#cfe6ff;font-size:14px}
  .trust{display:flex;gap:8px;justify-content:center;flex-wrap:wrap;margin-top:6px}
  .trust .t{font-size:12px;color:#9fb0d3;padding:6px 10px;border:1px solid rgba(255,255,255,.1);border-radius:999px}
  .close-x{position:absolute;right:14px;top:14px;background:transparent;border:0;color:#9fb0d3;font-size:22px;line-height:1}
</style>
</head>
<body>
  <!-- 2s Loader -->
  <div class="loader" id="loader"><div class="spinner" aria-label="Loading…"></div></div>

  <div class="wrap" id="app" style="opacity:0;transition:opacity .35s ease">
    <header><div class="logo">ZUZZ.TV</div></header>
    <h1 id="headline">Live Game Trial — Start Your Free Trial</h1>

    <div class="chipbar">
      <div class="chip live"><span class="dot"></span><strong>LIVE</strong></div>
      <div class="chip viewer" id="viewerChip">37,000 watching now</div>
      <div class="chip">HD • No cable</div>
      <div class="chip">Cancel anytime</div>
    </div>

    <div class="top-cta"><button class="btn btn-primary" id="ctaTop">Start Free Trial</button></div>

    <section class="card">
      <div class="video-wrap" id="videoWrap">
        <div class="progress"><div class="bar" id="bar"></div></div>
        <video id="vid" preload="metadata" playsinline></video>

        <div class="overlay-top">
          <div class="pill live"><span class="red"></span><strong style="letter-spacing:.5px">LIVE</strong></div>
        </div>

        <div class="countdown" id="countdown" aria-live="polite">Trial: 00:15</div>

        <!-- Controls -->
        <div class="controls">
          <button class="btn btn-ghost" id="muteBtn">Mute</button>
          <button class="btn btn-ghost" id="fullscreenBtn">Fullscreen</button>
        </div>

        <!-- Tap-to-play (no autoplay) -->
        <div class="gatecover" id="cover">
          <div class="playcta">
            <button class="btn btn-primary" id="startBtn">▶ Play 15s Trial</button>
            <div class="small">Starts with sound • No signup required</div>
          </div>
        </div>
      </div>
    </section>

    <p class="note">By starting a free trial, you agree to ZUZZ.TV’s terms. Cancel anytime in settings.</p>
  </div>

  <!-- Sticky CTA -->
  <div class="sticky"><button class="btn btn-primary" id="ctaSticky">Start Free Trial — Watch Now</button></div>

  <!-- ===== OUTSIDE FULL-SCREEN MODAL ===== -->
  <div class="modal-backdrop" id="trialModal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="modalDesc">
    <div class="modal-window">
      <button class="close-x" id="closeModal" aria-label="Close">×</button>
      <h3 id="modalTitle">Trial ended — watch the full game on ZUZZ.TV</h3>
      <p id="modalDesc">Start your free trial to unlock the full HD stream, instant replays, and multi-camera angles.</p>
      <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap;margin:8px 0 2px">
        <button class="btn btn-primary" id="ctaGate">Start Free Trial</button>
        <button class="btn btn-ghost" id="replayBtn">Replay 15s Trial</button>
      </div>
      <div class="trust">
        <div class="t">SSL Secure</div>
        <div class="t">No long-term contract</div>
        <div class="t">Works on iOS & Android</div>
      </div>
      <p class="note" style="margin-top:10px">Trouble playing <code>.mkv</code>? The full stream plays great on the ZUZZ.TV app & mobile site.</p>
    </div>
  </div>

<script>
  // ===== Config =====
  const AFFILIATE_URL = "https://billing.zuzz.tv/aff/go/nareshkumar9?i=1862";
  const VIDEOS = [
    "/videos/video1.mkv",
    "/videos/video2.mkv",
    "/videos/video3.mkv",
    "/videos/video4.mkv",
    "/videos/video5.mkv",
    "/videos/video6.mkv"
  ];
  const TRIAL_SECONDS = 15;
  const MIN_LOADING_MS = 2000;

  // ===== Elements =====
  const loader = document.getElementById("loader");
  const app = document.getElementById("app");
  const vid = document.getElementById("vid");
  const cover = document.getElementById("cover");
  const startBtn = document.getElementById("startBtn");
  const muteBtn = document.getElementById("muteBtn");
  const fullscreenBtn = document.getElementById("fullscreenBtn");
  const replayBtn = document.getElementById("replayBtn");
  const modal = document.getElementById("trialModal");
  const closeModalBtn = document.getElementById("closeModal");
  const bar = document.getElementById("bar");
  const countdown = document.getElementById("countdown");
  const viewerChip = document.getElementById("viewerChip");
  const headline = document.getElementById("headline");
  const ctas = [document.getElementById("ctaTop"), document.getElementById("ctaGate"), document.getElementById("ctaSticky")];

  // ===== Helpers =====
  function getParam(name){
    const url = new URL(window.location.href);
    const v = url.searchParams.get(name);
    return v ? decodeURIComponent(v.replace(/\+/g," ")) : null;
  }
  function chooseRandomNonRepeating(arr, key="__lastVideo"){
    if(!arr.length) return null;
    const last = sessionStorage.getItem(key);
    let idx = Math.floor(Math.random()*arr.length);
    if(arr.length > 1 && last){
      let tries = 0;
      while(arr[idx] === last && tries < 8){
        idx = Math.floor(Math.random()*arr.length);
        tries++;
      }
    }
    const choice = arr[idx];
    sessionStorage.setItem(key, choice);
    return choice;
  }
  function msFmt(s){ s = Math.max(0, s|0); const m = String((s/60)|0).padStart(2,"0"); const sec = String(s%60).padStart(2,"0"); return `${m}:${sec}` }
  function lockScroll(lock){
    document.documentElement.style.overflow = lock ? "hidden" : "";
    document.body.style.overscrollBehavior = lock ? "contain" : "";
  }

  // Fake viewers jitter (~37k)
  let viewers = 36500 + Math.floor(Math.random()*1200) + 800;
  function tickViewers(){
    const delta = Math.floor(Math.random()*120) - 40;
    viewers = Math.max(32000, viewers + delta);
    viewerChip.textContent = viewers.toLocaleString() + " watching now";
  }
  setInterval(tickViewers, 3000);

  // Dynamic title from ?title=
  const customTitle = getParam("title");
  if(customTitle){
    document.title = customTitle + " — Free Trial";
    headline.textContent = customTitle;
  }

  // CTA routing
  function goAff(){
    const u = new URL(AFFILIATE_URL);
    if(customTitle) u.searchParams.set("campaign", customTitle);
    u.searchParams.set("utm_source","lp");
    u.searchParams.set("utm_medium","trial");
    window.location.href = u.toString();
  }
  ctas.forEach(btn => btn.addEventListener("click", goAff));

  // 2s Loader then reveal (no autoplay)
  const startTime = Date.now();
  function showAppAfterMinDelay(){
    const elapsed = Date.now() - startTime;
    const wait = Math.max(0, MIN_LOADING_MS - elapsed);
    setTimeout(()=>{ loader.style.display="none"; app.style.opacity=1; }, wait);
  }
  showAppAfterMinDelay();

  // Prepare random video for user tap
  const chosenVideo = chooseRandomNonRepeating(VIDEOS);
  if(chosenVideo){
    vid.src = chosenVideo;
    vid.setAttribute("type","video/x-matroska");
  }

  let trialInterval = null, trialTimeout = null, elapsed = 0;

  function startTrial(){
    cover.style.display = "none";
    hideModal();
    bar.style.width = "0%";
    elapsed = 0;
    countdown.textContent = "Trial: " + msFmt(TRIAL_SECONDS);

    vid.muted = false;         // starts with sound (user gesture)
    vid.currentTime = 0;
    vid.play().catch(()=>{ /* if play fails, user can try again */ });

    clearInterval(trialInterval);
    trialInterval = setInterval(()=>{
      elapsed += 1;
      const remain = Math.max(0, TRIAL_SECONDS - elapsed);
      countdown.textContent = "Trial: " + msFmt(remain);
      bar.style.width = ((elapsed / TRIAL_SECONDS) * 100) + "%";
      if(remain <= 0){ clearInterval(trialInterval); }
    }, 1000);

    clearTimeout(trialTimeout);
    trialTimeout = setTimeout(stopTrial, TRIAL_SECONDS * 1000);
  }

  function stopTrial(){
    try{ vid.pause(); }catch(e){}
    showModal();
  }

  // Disallow skipping beyond elapsed
  vid.addEventListener("seeking", ()=>{
    const maxAllowed = Math.min(TRIAL_SECONDS, elapsed);
    if(vid.currentTime > maxAllowed) vid.currentTime = maxAllowed;
  });
  vid.addEventListener("ended", stopTrial);

  // Modal controls (outside the video)
  function showModal(){
    modal.classList.add("show");
    lockScroll(true);
    // Focus the primary CTA for accessibility
    setTimeout(()=> document.getElementById("ctaGate")?.focus(), 50);
  }
  function hideModal(){
    modal.classList.remove("show");
    lockScroll(false);
  }
  document.getElementById("ctaGate").addEventListener("click", goAff);
  closeModalBtn.addEventListener("click", hideModal);

  // Buttons
  startBtn.addEventListener("click", startTrial);
  replayBtn.addEventListener("click", startTrial);
  muteBtn.addEventListener("click", ()=>{
    vid.muted = !vid.muted;
    muteBtn.textContent = vid.muted ? "Unmute" : "Mute";
    if(!vid.paused){ vid.play().catch(()=>{}); }
  });
  fullscreenBtn.addEventListener("click", ()=>{
    const el = document.getElementById("videoWrap");
    if(document.fullscreenElement){ document.exitFullscreen(); }
    else if(el.requestFullscreen){ el.requestFullscreen(); }
  });

  // Hide native controls
  vid.controls = false;
</script>
</body>
</html>
