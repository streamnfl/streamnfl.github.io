<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
<title>GameHub Live â€” Watch Now</title>
<link href="https://fonts.googleapis.com/css2?family=Manrope:wght@400;600;800&display=swap" rel="stylesheet">
<style>
  :root{
    --ink:#eaf0f6; --muted:#aab6c5;
    --brand:#00d18a; --brand-2:#00b3ff; --card:#0d1117;
    --shadow:0 10px 30px rgba(0,0,0,.45); --radius:18px;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; color:var(--ink);
    font-family:Manrope, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;
    -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    background:#0a0c0f; /* fallback behind the collage */
    padding-top: max(0px, env(safe-area-inset-top));
    padding-left: max(0px, env(safe-area-inset-left));
    padding-right: max(0px, env(safe-area-inset-right));
  }
  a{color:inherit; text-decoration:none}
  .wrap{max-width:1180px;margin:0 auto;padding:0 16px}

  /* ===== Full-screen blurred/glowing background image ===== */
  .bg{ position:fixed; inset:0; z-index:-2; overflow:hidden; }
  .bg::before{
    content:""; position:absolute; inset:-6%;
    background-image: var(--bg-url, url('sports-collage.jpg'));
    background-size:cover; background-position:center;
    filter: blur(24px) saturate(1.25) brightness(1.2); /* ~50% blur feel */
    transform: scale(1.06); /* hide blur edges */
  }
  .bg::after{
    content:""; position:absolute; inset:0;
    background:
      radial-gradient(1200px 700px at 10% 0%, rgba(0,179,255,.35), transparent 60%),
      radial-gradient(1000px 600px at 90% 10%, rgba(0,209,138,.30), transparent 60%),
      linear-gradient(180deg, rgba(3,7,12,.55), rgba(3,7,12,.75));
    mix-blend-mode:screen; opacity:.85; pointer-events:none;
  }

  /* ===== Header ===== */
  .topbar{
    position:sticky; top:0; z-index:20;
    backdrop-filter:saturate(140%) blur(10px);
    background:linear-gradient(180deg, rgba(10,14,18,.85), rgba(10,14,18,.55));
    border-bottom:1px solid rgba(255,255,255,.06);
  }
  .nav{display:flex; align-items:center; justify-content:space-between; gap:8px; padding:12px 0}
  .brand{display:flex; align-items:center; gap:10px; font-weight:800; letter-spacing:.4px}
  .logo{
    width:28px; height:28px; border-radius:8px;
    background:conic-gradient(from 180deg, var(--brand), var(--brand-2));
    box-shadow:0 6px 18px rgba(0,179,255,.35), inset 0 0 18px rgba(0,209,138,.35);
  }
  .nav a.link{opacity:.95; padding:10px 12px; border-radius:10px; font-size:14px}
  .nav a.link:hover{background:rgba(255,255,255,.08)}

  /* ===== Layout / Mobile-first ===== */
  .hero{padding:18px 0 14px}
  .grid{display:grid; gap:14px; grid-template-columns:1fr}
  @media (min-width: 980px){ .grid{grid-template-columns: 1.35fr 1fr;} }

  .player{
    background:rgba(13,17,23,.75);
    border:1px solid rgba(255,255,255,.10);
    border-radius:var(--radius);
    box-shadow:var(--shadow);
    position:relative; overflow:hidden;
    aspect-ratio:16/9;
    backdrop-filter: blur(4px) saturate(120%);
  }
  video{width:100%; height:100%; display:block; background:#000; object-fit:cover}

  .badge{
    position:absolute; top:10px; left:10px;
    background:linear-gradient(90deg, var(--brand), var(--brand-2));
    color:#041016; font-weight:900; font-size:12px; padding:8px 10px; border-radius:999px;
    box-shadow:0 6px 20px rgba(0,179,255,.35);
    display:flex; gap:8px; align-items:center;
  }
  .live-dot{width:8px;height:8px;border-radius:99px;background:#ff4d4d; box-shadow:0 0 0 6px rgba(255,77,77,.22) inset}

  .overlay{
    position:absolute; inset:auto 0 0 0; padding:8px 10px;
    display:flex; gap:10px; align-items:center; justify-content:space-between;
    background:linear-gradient(180deg, transparent, rgba(0,0,0,.55));
    font-size:13px; color:#e5e7eb;
  }
  .hint{opacity:.85}
  .unmute{display:none}
  .unmute button{
    border:0; border-radius:12px; padding:10px 12px; font-weight:800; cursor:pointer;
    color:#041016; background:linear-gradient(135deg,var(--brand-2), var(--brand));
    box-shadow:0 10px 26px rgba(0,179,255,.45);
  }

  .side{
    background:rgba(13,17,23,.75);
    border:1px solid rgba(255,255,255,.10);
    border-radius:var(--radius);
    padding:14px;
    backdrop-filter: blur(4px) saturate(120%);
  }
  .title{margin:0 0 6px;font-size:clamp(20px, 6vw, 34px); line-height:1.15}
  .sub{margin:0 0 10px; color:var(--muted); font-size:clamp(14px,3.6vw,16px)}
  .facts{display:grid; grid-template-columns:repeat(2,minmax(0,1fr)); gap:10px; margin:12px 0}
  .fact{background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.10); padding:10px; border-radius:14px}
  .fact small{color:#c9d3df}
  .list{margin:10px 0 0; padding-left:18px; color:#d7dee7; font-size:14px}
  .footnote{color:#bac6d3; font-size:12px; margin-top:8px}

  /* ===== Modal (unskippable) â€” mobile friendly ===== */
  .modal{
    position:fixed; inset:0; display:flex; align-items:center; justify-content:center;
    background:rgba(6,10,14,.66); backdrop-filter: blur(12px) saturate(160%);
    z-index:1000; opacity:0; pointer-events:none; transition:opacity .28s ease;
    padding: max(16px, env(safe-area-inset-top)) max(16px, env(safe-area-inset-right))
             max(16px, env(safe-area-inset-bottom)) max(16px, env(safe-area-inset-left));
  }
  .modal.show{opacity:1; pointer-events:auto}
  .card{
    width:min(680px, 96%); max-height:calc(100dvh - 32px); overflow:auto;
    border-radius:20px; padding:16px; position:relative;
    background:linear-gradient(180deg, rgba(13,17,23,.95), rgba(10,13,17,.95));
    border:1px solid rgba(255,255,255,.12);
    box-shadow:0 24px 60px rgba(0,0,0,.6);
    transform:translateY(14px) scale(.985); animation:pop .35s ease forwards;
    -webkit-overflow-scrolling:touch; overscroll-beavior:contain;
  }
  @keyframes pop{to{transform:translateY(0) scale(1)}}
  .card h3{margin:2px 0 8px; text-align:center; font-size:clamp(18px, 5vw, 28px)}
  .card p{margin:0; text-align:center; color:var(--muted)}
  .actions{display:flex; gap:10px; justify-content:center; margin-top:12px; flex-wrap:wrap}
  .btn{
    display:inline-flex; align-items:center; justify-content:center; gap:10px;
    padding:12px 16px; font-weight:900; border-radius:12px; border:0; cursor:pointer;
    background:linear-gradient(135deg, var(--brand), var(--brand-2));
    color:#041016; box-shadow:0 14px 38px rgba(0,179,255,.45);
    font-size:16px;
  }

  body.modal-open{overflow:hidden}

  /* Hide timeline on hover devices (keep for touch) */
  @media (hover:hover){ /* controls removed via JS at runtime */ }
  .player video::-webkit-media-controls-timeline,
  .player video::-webkit-media-controls-current-time-display,
  .player video::-webkit-media-controls-time-remaining-display,
  .player video::-webkit-media-controls-seek-back-button,
  .player video::-webkit-media-controls-seek-forward-button{ display:none !important; }

  /* Small phones */
  @media (max-width:420px){
    .nav a.link{padding:8px 10px; font-size:13px}
    .btn{width:100%}
  }
  @media (prefers-reduced-motion: reduce){
    .modal{transition:none}
    .card{animation:none; transform:none}
  }
</style>
</head>

<body data-video-count="10"
      data-gate-delay="12000"
      data-register-url="https://your-signup-link.example.com"
      data-bg="sports-collage.jpg">
  <!-- Background image layers -->
  <div class="bg" id="bg"></div>

  <header class="topbar">
    <div class="wrap nav">
      <div class="brand"><span class="logo" aria-hidden="true"></span> GameHub Live</div>
      <nav>
        <a class="link" href="#watch">Watch</a>
        <a class="link" href="#sports">Sports</a>
        <a class="link" href="#help">Support</a>
      </nav>
    </div>
  </header>

  <main class="wrap hero" id="watch" aria-label="Live game">
    <div class="grid">
      <section class="player" aria-label="Live stream player">
        <span class="badge"><span class="live-dot" aria-hidden="true"></span> LIVE</span>
        <!-- Keep controls for touch; JS removes them on hover devices -->
        <video id="video" preload="metadata" autoplay muted playsinline webkit-playsinline controls controlslist="nodownload noplaybackrate">
          <source id="source" src="" type="video/mp4">
          Your browser does not support HTML5 video.
        </video>
        <div class="overlay">
          <div class="hint" id="hint">Preparing streamâ€¦</div>
          <div class="unmute" id="unmute"><button id="unmuteBtn" type="button">Tap to unmute ðŸ”Š</button></div>
        </div>
      </section>

      <aside class="side">
        <h1 class="title">Miami vs Dallas â€” Tonight</h1>
        <p class="sub">Smooth, low-latency playback on every device.</p>
        <div class="facts">
          <div class="fact"><strong>4K*</strong><br><small>Adaptive bitrate</small></div>
          <div class="fact"><strong>2 Devices</strong><br><small>Phone + TV</small></div>
          <div class="fact"><strong>Cloud DVR</strong><br><small>Replays & highlights</small></div>
          <div class="fact"><strong>24/7</strong><br><small>Support</small></div>
        </div>
        <ul class="list">
          <li>iOS, Android, Web, Apple TV, Fire TV, Roku, Smart TVs</li>
          <li>Chromecast & AirPlay supported</li>
          <li>No long-term contracts</li>
        </ul>
        <p class="footnote">*4K where available. Features vary by event and region.</p>
      </aside>
    </div>
  </main>

  <!-- Unskippable Gate (unskippable) -->
  <div id="gate" class="modal" aria-hidden="true" role="dialog" aria-modal="true" tabindex="-1">
    <div class="card" role="document">
      <div style="display:flex;align-items:center;justify-content:center;gap:10px;margin-bottom:6px;">
        <span class="badge-mini">QUICK STEP</span>
      </div>
      <h3>Create your account to continue</h3>
      <p>It takes less than a minute. Youâ€™ll be right back to the game.</p>
      <div class="actions">
        <a id="register" class="btn" href="#" rel="nofollow noopener">Register &amp; continue â†’</a>
      </div>
    </div>
  </div>

  <footer class="wrap" id="help" style="padding:18px 0 32px; color:#c1ceda;">
    <small>Need help? Email <a href="mailto:contact@gamehub.tv">contact@gamehub.tv</a></small>
  </footer>
<script>
  (function(){
    // Read ?title= from the URL
    const sp = new URLSearchParams(window.location.search);
    let t = sp.get('title');
    if (!t) return;

    // Normalize: treat "+" as spaces, strip control chars, trim
    t = t.replace(/\+/g, ' ').replace(/[\u0000-\u001F\u007F]/g, '').trim();
    if (!t) return;

    // Set the real <title>
    document.title = t;

    // Also update your page heading (the existing <h1 class="title">â€¦</h1>)
    const h1 = document.querySelector('.title');
    if (h1) h1.textContent = t;

    // (Optional) keep social previews in sync
    function setMeta(selector, attr, value){
      let el = document.querySelector(selector);
      if (!el){
        el = document.createElement('meta');
        if (selector.includes('og:title')) el.setAttribute('property', 'og:title');
        if (selector.includes('twitter:title')) el.setAttribute('name', 'twitter:title');
        document.head.appendChild(el);
      }
      el.setAttribute(attr, value);
    }
    setMeta('meta[property="og:title"]', 'content', t);
    setMeta('meta[name="twitter:title"]', 'content', t);
  })();
</script>

<script>
  /* ===== Set background image from data attribute ===== */
  (function(){
    const bgEl = document.getElementById('bg');
    const url = document.body.getAttribute('data-bg') || 'sports-collage.jpg';
    bgEl.style.setProperty('--bg-url', `url('${url}')`);
  })();

  /* ===== Hide native controls on hover devices (no timeline on hover) ===== */
  (function(){
    const video = document.getElementById('video');
    if (window.matchMedia && window.matchMedia('(hover: hover)').matches){
      video.removeAttribute('controls');
      video.setAttribute('disablepictureinpicture', '');
    }
  })();

  /* ===== Playlist Rotation: video1.mp4 ... videoN.mp4 ===== */
  (function(){
    const count = parseInt(document.body.getAttribute('data-video-count') || '1', 10);
    const files = Array.from({length: count}, (_, i) => `video${i+1}.mp4`);
    const key = 'currentVideoIndexMP4';
    let idx = Number(localStorage.getItem(key) || 0);
    if (!Number.isInteger(idx) || idx < 0 || idx >= files.length) idx = 0;

    const video = document.getElementById('video');
    const source = document.getElementById('source');
    const hint = document.getElementById('hint');
    const unmute = document.getElementById('unmute');

    function load(i){
      source.src = files[i];
      video.load();
      video.play().catch(()=>{ /* gesture policy */ });
    }

    let errors = 0;
    video.addEventListener('loadeddata', ()=>{
      hint.textContent = ''; hint.style.opacity = .0;
      unmute.style.display = video.muted ? 'block' : 'none';
    });
    video.addEventListener('play', ()=>{
      hint.textContent = ''; hint.style.opacity = .0;
      unmute.style.display = video.muted ? 'block' : 'none';
    });
    video.addEventListener('volumechange', ()=>{
      unmute.style.display = video.muted ? 'block' : 'none';
    });
    video.addEventListener('error', ()=>{
      errors++;
      if (errors < files.length){
        idx = (idx + 1) % files.length;
        load(idx);
      } else {
        hint.textContent = 'Weâ€™re having trouble loading the stream.';
        hint.style.opacity = 1;
      }
    });

    // iOS-friendly unmute helper
    const AC = window.AudioContext || window.webkitAudioContext;
    const audioCtx = AC ? new AC() : null;

    async function unlockAudio(){
      try{
        if (!audioCtx) return;
        if (audioCtx.state !== 'running') await audioCtx.resume();
        const b = audioCtx.createBuffer(1,1,22050);
        const s = audioCtx.createBufferSource(); s.buffer = b; s.connect(audioCtx.destination); s.start(0);
      }catch(e){}
    }

    async function doUnmute(){
      try{ video.pause(); }catch(_){}
      await unlockAudio();
      const t = Number.isFinite(video.currentTime) ? video.currentTime : 0;
      video.muted = false; video.defaultMuted = false;
      try{ if (video.volume === 0) video.volume = 1; }catch(_){}
      try{ video.currentTime = Math.max(0, t + 0.001); }catch(_){}
      try{ await video.play(); }catch(e){
        const u = source.getAttribute('src');
        source.src = u; video.load();
        await new Promise(r=>{
          const on = ()=>{ video.removeEventListener('loadedmetadata', on); try{ video.currentTime = t; }catch(_){ } r(); };
          video.addEventListener('loadedmetadata', on);
        });
        try{ await video.play(); }catch(_){}
      }
      if (!video.muted){ unmute.style.display='none'; }
    }

    document.getElementById('unmuteBtn').addEventListener('click', doUnmute, {passive:true});
    video.addEventListener('click', doUnmute, {passive:true});
    document.addEventListener('touchend', doUnmute, {once:true, passive:true});

    load(idx);
    localStorage.setItem(key, ( (idx + 1) % files.length ).toString());
  })();

  /* ===== Unskippable Register Gate (forces exit from fullscreen) ===== */
  (function(){
    const gate = document.getElementById('gate');
    const register = document.getElementById('register');
    const delay = parseInt(document.body.getAttribute('data-gate-delay') || '12000', 10);
    const dest = document.body.getAttribute('data-register-url') || '#';
    const video = document.getElementById('video');

    function lockScroll(on){ document.body.classList.toggle('modal-open', !!on); }

    // Force-exit any fullscreen / PiP / iOS presentation modes
    function ensureExitFullscreen(){
      try{
        // iOS Safari native video fullscreen & presentation modes
        if (video){
          if (typeof video.webkitSupportsFullscreen !== 'undefined' && video.webkitDisplayingFullscreen){
            try{ video.webkitExitFullscreen(); }catch(_){}
          }
          if (typeof video.webkitPresentationMode === 'string' && video.webkitPresentationMode !== 'inline'){
            try{ video.webkitSetPresentationMode('inline'); }catch(_){}
          }
        }

        // Standard Fullscreen API + vendor-prefixed
        const d = document;
        if (d.fullscreenElement){ d.exitFullscreen().catch(()=>{}); }
        else if (d.webkitFullscreenElement && d.webkitExitFullscreen){ d.webkitExitFullscreen(); }
        else if (d.mozFullScreenElement && d.mozCancelFullScreen){ d.mozCancelFullScreen(); }
        else if (d.msFullscreenElement && d.msExitFullscreen){ d.msExitFullscreen(); }

        // Picture-in-Picture (if somehow active)
        if ('pictureInPictureElement' in d && d.pictureInPictureElement){
          d.exitPictureInPicture().catch(()=>{});
        }
      }catch(_){}
    }

    function show(){
      ensureExitFullscreen(); // exit fullscreen the moment the gate opens
      gate.classList.add('show');
      gate.setAttribute('aria-hidden','false');
      lockScroll(true);
      setTimeout(()=> register.focus({preventScroll:true}), 30);
    }

    let started = false;
    function start(){ if (started) return; started = true; setTimeout(show, delay); }
    document.addEventListener('DOMContentLoaded', start);
    window.addEventListener('load', start);

    // If user enters fullscreen while the gate is visible, immediately leave it again
    document.addEventListener('fullscreenchange', ()=>{
      if (gate.classList.contains('show')) ensureExitFullscreen();
    });
    // Safari/iOS-specific fullscreen hooks on the <video> element
    if (video){
      video.addEventListener('webkitbeginfullscreen', ()=>{
        if (gate.classList.contains('show')) ensureExitFullscreen();
      });
      video.addEventListener('webkitendfullscreen', ()=>{}); // no-op, reserved
      video.addEventListener('webkitpresentationmodechanged', ()=>{
        if (gate.classList.contains('show')) ensureExitFullscreen();
      });
    }

    // Keep Escape from closing the modal
    document.addEventListener('keydown', (e)=>{
      if (e.key === 'Escape'){ e.preventDefault(); e.stopPropagation(); }
    });

    register.setAttribute('href', dest);
    register.addEventListener('click', ()=>{
      gate.classList.remove('show');
      gate.setAttribute('aria-hidden','true');
      lockScroll(false);
    }, {passive:true});
  })();
</script>
<script>
  /* ===== Unskippable Register Gate (forces exit from fullscreen) ===== */
  (function(){
    // --- YOUR TWO OFFERS (50/50 split) ---
    const OFFERS = [
      'https://trusthubmedia.com/app/aff/go/unzmnx?i=8&keyword=salanflweek1',
      'https://trusthubmedia.com/app/aff/go/unzmnx?i=8&keyword=salanflweek1'
    ];
    const OFFER_KEY = 'gh_fixed_offer_v1'; // storage key (change if you ever need to re-roll everyone)

    // --- tiny cookie helpers (fallback if localStorage blocked/cleared) ---
    function setCookie(n, v, days){
      try{
        const d = new Date();
        d.setTime(d.getTime() + (days*24*60*60*1000));
        document.cookie = encodeURIComponent(n) + '=' + encodeURIComponent(v) +
          '; expires=' + d.toUTCString() + '; path=/; SameSite=Lax';
      }catch(_){}
    }
    function getCookie(n){
      try{
        const name = encodeURIComponent(n) + '=';
        return document.cookie.split('; ').reduce((acc, kv)=>{
          if (kv.indexOf(name) === 0) return decodeURIComponent(kv.substring(name.length));
          return acc;
        }, '');
      }catch(_){ return ''; }
    }
    function storeOffer(url){
      try{ localStorage.setItem(OFFER_KEY, url); }catch(_){}
      setCookie(OFFER_KEY, url, 365);
    }
    function loadOffer(){
      try{
        const fromLS = localStorage.getItem(OFFER_KEY);
        if (fromLS) return fromLS;
      }catch(_){}
      const fromCookie = getCookie(OFFER_KEY);
      if (fromCookie) return fromCookie;
      const picked = OFFERS[Math.random() < 0.5 ? 0 : 1]; // first time: pick
      storeOffer(picked);
      return picked;
    }

    const gate = document.getElementById('gate');
    const register = document.getElementById('register');
    const delay = parseInt(document.body.getAttribute('data-gate-delay') || '12000', 10);
    const video = document.getElementById('video');

    // Sticky destination per user
    const dest = loadOffer();

    function lockScroll(on){ document.body.classList.toggle('modal-open', !!on); }

    // --- Exit any fullscreen modes immediately when gate appears (unchanged) ---
    function ensureExitFullscreen(){
      try{
        if (video){
          if (typeof video.webkitSupportsFullscreen !== 'undefined' && video.webkitDisplayingFullscreen){
            try{ video.webkitExitFullscreen(); }catch(_){}
          }
          if (typeof video.webkitPresentationMode === 'string' && video.webkitPresentationMode !== 'inline'){
            try{ video.webkitSetPresentationMode('inline'); }catch(_){}
          }
        }
        const d = document;
        if (d.fullscreenElement){ d.exitFullscreen().catch(()=>{}); }
        else if (d.webkitFullscreenElement && d.webkitExitFullscreen){ d.webkitExitFullscreen(); }
        else if (d.mozFullScreenElement && d.mozCancelFullScreen){ d.mozCancelFullScreen(); }
        else if (d.msFullscreenElement && d.msExitFullscreen){ d.msExitFullscreen(); }
        if ('pictureInPictureElement' in d && d.pictureInPictureElement){
          d.exitPictureInPicture().catch(()=>{});
        }
      }catch(_){}
    }

    function show(){
      ensureExitFullscreen();
      gate.classList.add('show');
      gate.setAttribute('aria-hidden','false');
      lockScroll(true);
      setTimeout(()=> register.focus({preventScroll:true}), 30);
    }

    let started = false;
    function start(){ if (started) return; started = true; setTimeout(show, delay); }
    document.addEventListener('DOMContentLoaded', start);
    window.addEventListener('load', start);

    document.addEventListener('fullscreenchange', ()=>{ if (gate.classList.contains('show')) ensureExitFullscreen(); });
    if (video){
      video.addEventListener('webkitbeginfullscreen', ()=>{ if (gate.classList.contains('show')) ensureExitFullscreen(); });
      video.addEventListener('webkitpresentationmodechanged', ()=>{ if (gate.classList.contains('show')) ensureExitFullscreen(); });
    }
    document.addEventListener('keydown', (e)=>{ if (e.key === 'Escape'){ e.preventDefault(); e.stopPropagation(); }});

    // -- Wire the sticky URL and prevent multi-click flip/flop --
    register.setAttribute('href', dest);
    register.setAttribute('target', '_self'); // avoid many new tabs
    let clickLocked = false;
    register.addEventListener('click', (e)=>{
      if (clickLocked){
        e.preventDefault();
        return;
      }
      clickLocked = true;
      storeOffer(dest); // re-persist to be extra sure
      register.setAttribute('aria-disabled','true');
      register.style.pointerEvents = 'none';
      register.textContent = 'Openingâ€¦';

      // close the gate (navigation proceeds)
      gate.classList.remove('show');
      gate.setAttribute('aria-hidden','true');
      lockScroll(false);
    }, {passive:false});
  })();
</script>

</body>
</html>
